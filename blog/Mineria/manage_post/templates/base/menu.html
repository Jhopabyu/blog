<!-- Cargar archivos estáticos -->
{% load static %}

<header class="header">
    <div class="menu">
        <!---->
        <div>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
              <i class="bi bi-list fs-1 text-dark"></i>
              <span>MENU</span>
            </button>

        </div>
        <div class="logo">
            <!--Logo-->
            <a href="{% url 'index' %}"><img src="{% static 'base/image/Logo/abc_company.png' %}" alt="Logo"></a>
        </div>
        <nav class="nav">
            {% if request.user.is_authenticated %}
            <ul class="profile">

                <li>
                    <!-- Imagen del usuario -->
                    {% if request.user.profile.photo %}
                    <img src="{{ request.user.profile.photo.url }}" alt="Profile"
                         class="img-profile">
                    {% else %}
                    <img src="{% static 'base/image/Default/default-user.png' %}" alt="Profile"
                         class="img-profile">
                    {% endif %}
                    <!-- Nombre completo del usuario -->
                        <span class="name-user">{{ request.user.full_name }}</span>
                </li>

                <!-- Botón de editar perfil -->
                <li>
                    <a href="{% url 'edit_user' %}" class="btn-edit-profile">Editar perfil</a>
                </li>
                <!-- Verificar si el usuario es staff -->
                {% if request.user.is_staff == True %}
                <li>
                    <a href="{% url 'admin:index' %}" class="btn-admin">Ir al admin</a>
                </li>
                {% endif %}
                <!-- Botón de salir -->
                <li>
                    <form method="POST" action="{% url 'logout' %}" >
                    {% csrf_token %}
                        <button type="submit" class="btn-admin" >
                            Salir
                        </button>
                    </form>
                </li>
            </ul>
            {% else %}
            <ul>
                <li>
                    {% url 'login' as url_login %}
                    {% url 'register' as url_register %}

                    {% if request.path == url_register %}
                    <a href="{% url 'login' %}" class="login">Iniciar sesión</a>
                    {% elif request.path == url_login %}
                    <a href="{% url 'register' %}" class="create">Crear cuenta</a>
                    {% else %}
                    <a href="{% url 'login' %}" class="login">Iniciar sesión</a>
                    <a href="{% url 'register' %}" class="create">Crear cuenta</a>
                    {% endif %}
                </li>
            </ul>
            {% endif %}
        </nav>
    </div>
<!--        -->
<div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasMenuLabel">{{ _('Menú') }}</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body d-flex">
    <!-- Menú izquierdo -->
    <div class="w-50 pe-3 border-end">
      <ul class="nav flex-column">
        <li class="nav-item"><a class="nav-link text-white" href="#" onclick="mostrarSubmenu('equipo')">{{ _('Sobre Nosotros') }}</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'servicios' %}">{{ _('Servicios') }}</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="#" onclick="mostrarSubmenu('que')">{{ _('Qué Hacemos') }}</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="#">{{ _('Contáctanos') }}</a></li>
      </ul>
    </div>
    <!-- Menú derecho -->
    <div class="w-50 ps-3" id="submenuContent">
      <p>{{ _('Selecciona una opción del menú') }}</p>
    </div>
  </div>
</div>

<!--para el menu hamburguesa-->
<script>
  const urlProyectos = "{% url 'proyectos' %}";
  const textoSobreNosotros = "{{ _('Sobre Nosotros') }}";
  const textoQuienesSomos = "{{ _('Quiénes Somos') }}";
  const textoOrganizacion = "{{ _('Organizacion') }}";
  const textoProyectos = "{{ _('Proyectos') }}";
  const textoProyectosDeDesarrollo = "{{ _('Proyectos de Desarrollo') }}";

  function mostrarSubmenu(opcion) {
    let contenido = '';
    if (opcion === 'equipo') {
      contenido = `
        <h6>${textoSobreNosotros}</h6>
        <ul class="list-unstyled">
          <li><a href="#" class="text-white">${textoQuienesSomos}</a></li>
          <li><a href="#" class="text-white">${textoOrganizacion}</a></li>
        </ul>`;
    }
    if (opcion === 'que') {
      contenido = `
        <h6>${textoProyectosDeDesarrollo}</h6>
        <ul class="list-unstyled">
          <li><a href="${urlProyectos}" class="text-white">${textoProyectos}</a></li>
        </ul>`;
    }
    document.getElementById('submenuContent').innerHTML = contenido;
  }
</script>




</header>